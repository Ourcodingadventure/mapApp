var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _Text=_interopRequireDefault(require("../Text"));var _useThemeProps=require("../../../hooks/useThemeProps");var _useHasResponsiveProps=require("../../../hooks/useHasResponsiveProps");var _styled=require("../../../utils/styled");var _this=this,_jsxFileName="/Users/suraj/Sites/projects/NativeBase/src/components/primitives/Image/index.tsx";var StyledImage=(0,_styled.makeStyledComponent)(_reactNative.Image);var Image=function Image(props,ref){var _usePropsResolution=(0,_useThemeProps.usePropsResolution)('Image',props),source=_usePropsResolution.source,src=_usePropsResolution.src,fallbackElement=_usePropsResolution.fallbackElement,alt=_usePropsResolution.alt,fallbackSource=_usePropsResolution.fallbackSource,ignoreFallback=_usePropsResolution.ignoreFallback,_alt=_usePropsResolution._alt,resolvedProps=(0,_objectWithoutProperties2.default)(_usePropsResolution,["source","src","fallbackElement","alt","fallbackSource","ignoreFallback","_alt"]);var finalSource=(0,_react.useRef)(null);var getSource=(0,_react.useCallback)(function(){if(source){finalSource.current=source;}else if(src){finalSource.current={uri:src};}return finalSource.current;},[source,src]);var _useState=(0,_react.useState)(getSource()),_useState2=(0,_slicedToArray2.default)(_useState,2),renderedSource=_useState2[0],setSource=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2.default)(_useState3,2),alternate=_useState4[0],setAlternate=_useState4[1];var _useState5=(0,_react.useState)(true),_useState6=(0,_slicedToArray2.default)(_useState5,2),fallbackSourceFlag=_useState6[0],setfallbackSourceFlag=_useState6[1];_react.default.useEffect(function(){return function(){finalSource.current=null;};},[source,src,getSource]);var onImageLoadError=(0,_react.useCallback)(function(event){props.onError&&props.onError(event);console.warn(event.nativeEvent.error);if(!ignoreFallback&&fallbackSource&&fallbackSource!==renderedSource&&fallbackSourceFlag){setfallbackSourceFlag(false);setSource(fallbackSource);}else{setAlternate(true);}},[fallbackSource,fallbackSourceFlag,ignoreFallback,props,renderedSource]);if((0,_useHasResponsiveProps.useHasResponsiveProps)(props)){return null;}if(!alt){console.warn('Please pass alt prop to Image component');}if(alternate){if(fallbackElement){if(_react.default.isValidElement(fallbackElement)){return fallbackElement;}}else return _react.default.createElement(_Text.default,(0,_extends2.default)({},_alt,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:74,columnNumber:19}}),alt);}return _react.default.createElement(StyledImage,(0,_extends2.default)({source:renderedSource,accessibilityLabel:alt,alt:alt},resolvedProps,{onError:onImageLoadError,ref:ref,__self:_this,__source:{fileName:_jsxFileName,lineNumber:77,columnNumber:5}}));};var _default=(0,_react.memo)((0,_react.forwardRef)(Image));exports.default=_default;
//# sourceMappingURL=index.js.map